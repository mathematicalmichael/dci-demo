<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>Parallel Plots</title>
    <link rel="stylesheet" type="text/css" href="parallel.css" />
  </head>
  <body>
  <div id="header">
    <h1>Parallel Plots</h1>
    <input type="file" onchange="loadFile()" />

  <script>
    var reader = new FileReader();  
    function loadFile() {      
      var file = document.querySelector('input[type=file]').files[0];      
      if (file) {
        reader.readAsText(file);
      }      
      reader.addEventListener("load", make_viz, false);
    }

    function read_in() {
        // Convert quantitative scales to floats
        var raw_data = d3.csv.parse(reader.result);
        newdata = raw_data.map(function(d) {
        for (var k in d) {
            if (!_.isNaN(raw_data[0][k] - 0) && k != 'id') {
                d[k] = parseFloat(d[k]) || 0;
                }
            };
            return d;
            });
        }   
    
    function parseFile(){
      var doesColumnExist = false;
      var data = d3.csv.parse(reader.result, function(d){
        doesColumnExist = d.hasOwnProperty("someColumn");
        return d;   
      });
      console.log(doesColumnExist);
    }
  </script>

    <button title="Zoom in on selected data" id="keep-data" disabled="disabled">Keep</button>
    <button title="Remove selected data" id="exclude-data" disabled="disabled">Exclude</button>
    <button title="Export data as CSV" id="export-data">Export</button>
    <div class="controls">
      <strong id="rendered-count"></strong>/<strong id="selected-count"></strong><!--<strong id="data-count"></strong>-->
      <div class="fillbar"><div id="selected-bar"><div id="rendered-bar">&nbsp;</div></div></div>
      Lines at <strong id="opacity"></strong> opacity.
      <span class="settings">
        <button id="hide-ticks">Hide Ticks</button>
        <button id="show-ticks" disabled="disabled">Show Ticks</button>
        <button id="dark-theme">Dark</button>
        <button id="light-theme" disabled="disabled">Light</button>
      </span>
    </div>
    <div style="clear:both;"></div>
  </div>
  <div id="chart">
    <canvas id="background"></canvas>
    <canvas id="foreground"></canvas>
    <canvas id="highlight"></canvas>
    <svg></svg>
  </div>
  <div id="wrap">
    <div class="third">
      <p id="item-list">
      </p>
    </div>
  </div>
  </body>
  <script src="https://d3js.org/d3.v2.min.js"></script>
  <script src="http://underscorejs.org/underscore.js"></script>
  <script src="parallel.js"></script>
</html>
